# State configuration
# To change states: update name and fips_code, then run: run-all (or fetch-data, preprocess, compute-distance, find-unreachable, visualize)
# 
# Common FIPS codes: AK=02, AZ=04, CA=06, CO=08, FL=12, MT=30, NV=32, NM=35, TX=48, UT=49, WY=56
# Full list: see SWITCH_STATES.md
state:
  name: "Pennsylvania"
  fips_code: "42"  # Pennsylvania FIPS code

projection:
  # EPSG:5070 - NAD83 / Conus Albers (distance-preserving for CONUS)
  crs: "EPSG:5070"
  
raster:
  # Resolution in meters
  resolution: 250
  
data:
  # OpenStreetMap road types to include
  road_types:
    - "motorway"
    - "trunk"
    - "primary"
    - "secondary"
    - "tertiary"
    - "unclassified"
    - "residential"
    - "motorway_link"
    - "trunk_link"
    - "primary_link"
    - "secondary_link"
    - "tertiary_link"
  
  # Optional: include settlements
  include_settlements: false
  
paths:
  # Relative to project root
  raw_data: "data/raw"
  processed_data: "data/processed"
  outputs: "outputs"
  maps: "outputs/maps"
  
output:
  # Save intermediate results
  save_intermediate: true
  
  # Output formats
  static_map: true
  interactive_map: true
  labeled_map: true
  
  # Results file
  results_file: "outputs/results.json"

analysis:
  # Number of top locations to find
  top_n: 5
  
  # Minimum separation distance between top locations (km)
  # This prevents all top N from being clustered in the same area
  min_separation_km: 25
  
  # Land cover types to exclude from "unreachable location" candidates
  # These areas can still act as barriers, but won't be marked as destinations
  # NLCD codes: 11=Open Water, 12=Perennial Ice/Snow
  exclude_landcover: [11, 12]

cost_distance:
  # Enable terrain-aware cost-distance analysis
  # When false (default), uses simple Euclidean distance
  # When true, incorporates slope and land cover factors
  enabled: true
  
  # Resolution for cost surface calculations (meters)
  # Should match raster.resolution for consistency
  resolution_m: 250
  
  # Terrain data sources
  terrain_data:
    # Digital Elevation Model (for slope calculations)
    dem:
      enabled: true  # Set to false to skip DEM/slope (assumes flat terrain)
      
      # Option 1: GMTED2010 (RECOMMENDED - covers all US with decent resolution)
      # Point to the GMTED2010 directory containing tile subdirectories
      gmted_dir: "data/raw/GMTED2010"
      # GMTED variant: mea=mean, med=median, min=minimum, max=maximum
      gmted_variant: "mea"
      
      # Option 2: Use local file (automatic extraction for any state)
      # If local_file is set and GMTED fails, it will be used as fallback
      local_file: null  # e.g., "data/raw/national_dem.tif"
      
      # Option 3: Download from USGS (often fails, requires manual download)
      source: "USGS_3DEP"
      url_template: "https://prd-tnm.s3.amazonaws.com/index.html?prefix=StagedProducts/Elevation/13/TIFF/"
    
    # Land Cover (for terrain type costs)
    landcover:
      enabled: true  # Set to false to skip land cover (uses uniform cost)
      
      # Option 1: Use local file (RECOMMENDED - automatic extraction for any state)
      # Point this to the national NLCD file in data/raw/
      local_file: "data/raw/Annual_NLCD_LndCov_2024_CU_C1V1.tif"
      
      # Option 2: Download from MRLC (often fails due to access restrictions)
      source: "NLCD_2021"
      url: "https://s3-us-west-2.amazonaws.com/mrlc/nlcd_2021_land_cover_l48_20230630.zip"
  
  # Slope cost function parameters (only used if DEM enabled)
  slope:
    # Slope thresholds (degrees) and multipliers
    # Linear interpolation between thresholds
    flat: 1.0        # 0째 slope: no penalty
    moderate: 2.0    # 15째 slope: 2x cost
    steep: 4.0       # 30째 slope: 4x cost  
    very_steep: 10.0 # 45째+ slope: 10x cost
  
visualization:
  # Colormap for distance heatmap
  colormap: "YlOrRd"
  
  # Figure size (inches)
  figsize: [12, 10]
  
  # DPI for static maps
  dpi: 300
